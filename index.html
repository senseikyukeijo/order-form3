<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>先生ミニショップ</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .product { border: 1px solid #ccc; padding: 10px; margin: 10px; border-radius: 8px; }
    .hidden { display: none; }
    input[type='number'] { width: 60px; }
  </style>
</head>
<body>
  <h1>先生ミニショップ</h1>

  <!-- 商品選択画面 -->
  <div id="catalogScreen">
    <h2>商品一覧</h2>
    <div class="product">
      赤ペン 🖊️ - 300円 <br>
      数量: <input type="number" id="qtyRedPen" min="1" value="1"> 
      <button onclick="addToCart('赤ペン', 300, document.getElementById('qtyRedPen').value)">カートに追加</button>
    </div>
    <div class="product">
      黒ボールペン ✒️ - 280円 <br>
      数量: <input type="number" id="qtyBlackPen" min="1" value="1"> 
      <button onclick="addToCart('黒ボールペン', 280, document.getElementById('qtyBlackPen').value)">カートに追加</button>
    </div>
    <div class="product">
      青ボールペン ✒️ - 280円 <br>
      数量: <input type="number" id="qtyBluePen" min="1" value="1"> 
      <button onclick="addToCart('青ボールペン', 280, document.getElementById('qtyBluePen').value)">カートに追加</button>
    </div>
    <div class="product">
      コーヒー ☕ - 150円 <br>
      数量: <input type="number" id="qtyCoffee" min="1" value="1"> 
      <button onclick="addToCart('コーヒー', 150, document.getElementById('qtyCoffee').value)">カートに追加</button>
    </div>
    <div class="product">
      水 💧 - 100円 <br>
      数量: <input type="number" id="qtyWater" min="1" value="1"> 
      <button onclick="addToCart('水', 100, document.getElementById('qtyWater').value)">カートに追加</button>
    </div>
    <button onclick="showCart()">カートを見る</button>
  </div>

  <!-- 注文確認画面 -->
  <div id="cartScreen" class="hidden">
    <h2>注文確認</h2>
    <div id="cart"></div>
    <p id="total"></p>
    <button onclick="submitOrder()">注文する</button>
    <button onclick="showCatalog()">商品に戻る</button>
  </div>

  <script>
    let cart = [];

    function addToCart(name, price, qty) {
      qty = parseInt(qty);
      if (isNaN(qty) || qty <= 0) return;
      let item = cart.find(p => p.name === name);
      if (item) {
        item.qty += qty;
      } else {
        cart.push({name, price, qty});
      }
      alert(name + 'を' + qty + '個カートに追加しました');
    }

    function showCart() {
      document.getElementById('catalogScreen').classList.add('hidden');
      document.getElementById('cartScreen').classList.remove('hidden');
      renderCart();
    }

    function showCatalog() {
      document.getElementById('cartScreen').classList.add('hidden');
      document.getElementById('catalogScreen').classList.remove('hidden');
    }

    function renderCart() {
      let cartDiv = document.getElementById('cart');
      cartDiv.innerHTML = '';
      let total = 0;
      cart.forEach((item, index) => {
        let subtotal = item.price * item.qty;
        total += subtotal;
        cartDiv.innerHTML += `
          <div>
            ${item.name} - ${item.price}円 
            数量: <input type="number" min="0" value="${item.qty}" onchange="updateQty(${index}, this.value)"> 
            小計: ${subtotal}円
          </div>`;
      });
      document.getElementById('total').innerText = '合計: ' + total + '円';
    }

    function updateQty(index, newQty) {
      newQty = parseInt(newQty);
      if (isNaN(newQty) || newQty < 0) return;
      if (newQty === 0) {
        cart.splice(index, 1);
      } else {
        cart[index].qty = newQty;
      }
      renderCart();
    }

    function submitOrder() {
      if (cart.length === 0) {
        alert('カートが空です');
        return;
      }
      let orderText = '注文内容:\n';
      cart.forEach(item => {
        orderText += `${item.name} x ${item.qty}\n`;
      });
      alert(orderText + '\n注文を送信しました！');
      cart = [];
      showCatalog();
    }
  </script>
</body>
</html>
