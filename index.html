<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>å…ˆç”ŸãƒŸãƒ‹ã‚·ãƒ§ãƒƒãƒ—</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .product { border: 1px solid #ccc; padding: 10px; margin: 10px; border-radius: 8px; }
    .hidden { display: none; }
    input[type='number'] { width: 60px; }
  </style>
</head>
<body>
  <h1>å…ˆç”ŸãƒŸãƒ‹ã‚·ãƒ§ãƒƒãƒ—</h1>

  <!-- å•†å“é¸æŠç”»é¢ -->
  <div id="catalogScreen">
    <h2>å•†å“ä¸€è¦§</h2>
    <div class="product">
      èµ¤ãƒšãƒ³ ğŸ–Šï¸ - 300å†† <br>
      æ•°é‡: <input type="number" id="qtyRedPen" min="1" value="1"> 
      <button onclick="addToCart('èµ¤ãƒšãƒ³', 300, document.getElementById('qtyRedPen').value)">ã‚«ãƒ¼ãƒˆã«è¿½åŠ </button>
    </div>
    <div class="product">
      é»’ãƒœãƒ¼ãƒ«ãƒšãƒ³ âœ’ï¸ - 280å†† <br>
      æ•°é‡: <input type="number" id="qtyBlackPen" min="1" value="1"> 
      <button onclick="addToCart('é»’ãƒœãƒ¼ãƒ«ãƒšãƒ³', 280, document.getElementById('qtyBlackPen').value)">ã‚«ãƒ¼ãƒˆã«è¿½åŠ </button>
    </div>
    <div class="product">
      é’ãƒœãƒ¼ãƒ«ãƒšãƒ³ âœ’ï¸ - 280å†† <br>
      æ•°é‡: <input type="number" id="qtyBluePen" min="1" value="1"> 
      <button onclick="addToCart('é’ãƒœãƒ¼ãƒ«ãƒšãƒ³', 280, document.getElementById('qtyBluePen').value)">ã‚«ãƒ¼ãƒˆã«è¿½åŠ </button>
    </div>
    <div class="product">
      ã‚³ãƒ¼ãƒ’ãƒ¼ â˜• - 150å†† <br>
      æ•°é‡: <input type="number" id="qtyCoffee" min="1" value="1"> 
      <button onclick="addToCart('ã‚³ãƒ¼ãƒ’ãƒ¼', 150, document.getElementById('qtyCoffee').value)">ã‚«ãƒ¼ãƒˆã«è¿½åŠ </button>
    </div>
    <div class="product">
      æ°´ ğŸ’§ - 100å†† <br>
      æ•°é‡: <input type="number" id="qtyWater" min="1" value="1"> 
      <button onclick="addToCart('æ°´', 100, document.getElementById('qtyWater').value)">ã‚«ãƒ¼ãƒˆã«è¿½åŠ </button>
    </div>
    <button onclick="showCart()">ã‚«ãƒ¼ãƒˆã‚’è¦‹ã‚‹</button>
  </div>

  <!-- æ³¨æ–‡ç¢ºèªç”»é¢ -->
  <div id="cartScreen" class="hidden">
    <h2>æ³¨æ–‡ç¢ºèª</h2>
    <div id="cart"></div>
    <p id="total"></p>
    <button onclick="submitOrder()">æ³¨æ–‡ã™ã‚‹</button>
    <button onclick="showCatalog()">å•†å“ã«æˆ»ã‚‹</button>
  </div>

  <script>
    let cart = [];

    function addToCart(name, price, qty) {
      qty = parseInt(qty);
      if (isNaN(qty) || qty <= 0) return;
      let item = cart.find(p => p.name === name);
      if (item) {
        item.qty += qty;
      } else {
        cart.push({name, price, qty});
      }
      alert(name + 'ã‚’' + qty + 'å€‹ã‚«ãƒ¼ãƒˆã«è¿½åŠ ã—ã¾ã—ãŸ');
    }

    function showCart() {
      document.getElementById('catalogScreen').classList.add('hidden');
      document.getElementById('cartScreen').classList.remove('hidden');
      renderCart();
    }

    function showCatalog() {
      document.getElementById('cartScreen').classList.add('hidden');
      document.getElementById('catalogScreen').classList.remove('hidden');
    }

    function renderCart() {
      let cartDiv = document.getElementById('cart');
      cartDiv.innerHTML = '';
      let total = 0;
      cart.forEach((item, index) => {
        let subtotal = item.price * item.qty;
        total += subtotal;
        cartDiv.innerHTML += `
          <div>
            ${item.name} - ${item.price}å†† 
            æ•°é‡: <input type="number" min="0" value="${item.qty}" onchange="updateQty(${index}, this.value)"> 
            å°è¨ˆ: ${subtotal}å††
          </div>`;
      });
      document.getElementById('total').innerText = 'åˆè¨ˆ: ' + total + 'å††';
    }

    function updateQty(index, newQty) {
      newQty = parseInt(newQty);
      if (isNaN(newQty) || newQty < 0) return;
      if (newQty === 0) {
        cart.splice(index, 1);
      } else {
        cart[index].qty = newQty;
      }
      renderCart();
    }

    function submitOrder() {
      if (cart.length === 0) {
        alert('ã‚«ãƒ¼ãƒˆãŒç©ºã§ã™');
        return;
      }
      let orderText = 'æ³¨æ–‡å†…å®¹:\n';
      cart.forEach(item => {
        orderText += `${item.name} x ${item.qty}\n`;
      });
      alert(orderText + '\næ³¨æ–‡ã‚’é€ä¿¡ã—ã¾ã—ãŸï¼');
      cart = [];
      showCatalog();
    }
  </script>
</body>
</html>
